<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis Comparativo IA - Adri√°n Avil√©s</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* =========================================
           1. ESTILOS BASE (Importados de styles.css)
           ========================================= */
        :root {
            /* Colores principales */
            --color-primary: #1a2332;
            --color-secondary: #2d3e50;
            --color-accent: #4a9eff;
            --color-background: #0f1419;
            --color-border: #2d3e50;
            --color-text: #e8eaed;
            --color-text-secondary: #9ca3af;
            --color-led: #4a9eff88;
            
            /* Colores espec√≠ficos para gr√°ficas */
            --chart-qwen4b: #4a9eff;
            --chart-granite: #ff6b6b;
            --chart-gemma: #a29bfe;
            --chart-qwen8b: #00b894;

            /* Tipograf√≠a */
            --font-primary: 'Segoe UI', Roboto, Arial, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-primary);
            background-color: var(--color-background);
            color: var(--color-text);
            padding-top: 70px; /* Espacio para el navbar fixed */
            line-height: 1.6;
        }

        a { text-decoration: none; color: inherit; }

        /* =========================================
           2. NAVBAR (Id√©ntico a tu web)
           ========================================= */
        #navbar-index {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            width: 100%;
            border-bottom: solid 2px var(--color-border);
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: var(--color-background);
            z-index: 1000;
        }

        #navbar-logo {
            font-weight: bold;
            font-size: 23px;
            transition: color 0.3s ease;
            color: var(--color-text);
        }

        #navbar-logo:hover { color: var(--color-accent); }

        #navbar-menu {
            list-style-type: none;
            display: flex;
            gap: 30px;
            font-size: 15px;
        }

        .nav-link {
            position: relative;
            color: var(--color-text-secondary);
            font-weight: bold;
            padding-bottom: 5px;
            transition: color 0.2s ease;
        }

        .nav-link:hover, .nav-link.active { color: var(--color-text); }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--color-accent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.2s ease-out;
        }

        .nav-link:hover::after, .nav-link.active::after { transform: scaleX(1); }

        /* =========================================
           3. LAYOUT PRINCIPAL (Estilo proyecto-info)
           ========================================= */
        #sec-ruta {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        #sec-ruta h3 { display: inline-block; margin-right: 10px; color: var(--color-text); }
        #sec-ruta a:hover { color: var(--color-accent); text-decoration: underline; }
        #sec-ruta span { margin: 0 5px; }

        #info-proyect {
            display: flex;
            gap: 40px;
            margin: 0 auto;
            max-width: 1200px;
            padding: 20px;
            position: relative;
        }

        /* Sidebar Izquierda */
        #navegador-izq {
            flex: 0.25;
            background-color: var(--color-primary);
            font-size: 16px;
            border-radius: 10px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: sticky;
            top: 100px; /* Debajo del navbar */
            align-self: flex-start;
            border: 1px solid var(--color-border);
        }

        #navegador-izq a {
            position: relative;
            color: var(--color-text-secondary);
            padding: 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        #navegador-izq a:hover { background-color: var(--color-secondary); color: var(--color-text); }
        
        #navegador-izq a#active {
            color: var(--color-accent);
            background-color: var(--color-secondary);
            border-left: 3px solid var(--color-accent);
        }

        #navegador-izq hr { border: 1px solid var(--color-border); margin: 5px 0; }

        /* Contenido Derecho */
        #informacion-der {
            flex: 0.75;
            display: flex;
            flex-direction: column;
            gap: 60px; /* Separaci√≥n entre grandes bloques */
        }

        /* Secciones */
        .seccion-contenido {
            scroll-margin-top: 100px; /* Para que el anchor no quede tapado por el navbar */
            background-color: var(--color-primary);
            padding: 40px;
            border-radius: 10px;
            border: 1px solid var(--color-border);
        }

        .header-seccion {
            margin-bottom: 30px;
        }

        .header-seccion h1 {
            font-size: 32px;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        .header-seccion hr {
            border: none;
            height: 2px;
            background: linear-gradient(90deg, var(--color-accent), transparent);
        }

        /* Estilos de Texto */
        p { color: var(--color-text-secondary); margin-bottom: 15px; font-size: 17px; }
        strong { color: var(--color-text); }
        
        /* Cajas de conclusiones / destacados */
        .highlight-box {
            background-color: rgba(74, 158, 255, 0.1);
            border-left: 4px solid var(--color-accent);
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        /* Estilos para las Gr√°ficas */
        .chart-wrapper {
            background-color: var(--color-background);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--color-border);
            height: 400px;
            position: relative;
        }
        
        /* Cursor pointer para indicar interactividad */
        canvas {
            cursor: pointer;
        }

        .chart-title {
            text-align: center;
            color: var(--color-accent);
            margin-bottom: 15px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
            letter-spacing: 1px;
        }

        /* Estilos para los Prompts (Tarjetas) */
        .prompt-card {
            background-color: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .prompt-header {
            background-color: var(--color-secondary);
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--color-border);
        }

        .level-badge {
            background-color: var(--color-accent);
            color: var(--color-background);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .prompt-body { padding: 25px; }

        .prompt-code {
            background-color: #0c0f13;
            color: #a5b3ce;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            border-left: 3px solid var(--color-text-secondary);
            margin: 15px 0;
        }

        .prompt-eval {
            margin-top: 15px;
            font-size: 15px;
        }
        
        .prompt-eval span { color: var(--color-accent); font-weight: bold; }

        /* Responsive */
        @media (max-width: 900px) {
            #info-proyect { flex-direction: column; }
            #navegador-izq { position: relative; top: 0; width: 100%; margin-bottom: 20px; }
            .chart-wrapper { height: 300px; }
        }
    </style>
</head>
<body>

    <nav id="navbar-index">
        <div id="navbar-izq">
            <a href="../index.html" id="navbar-logo">ADRI√ÅN AVIL√âS</a>
        </div>
        <div id="navbar-der">
            <ul id="navbar-menu">
                <li><a href="../index.html" class="nav-link">INICIO</a></li>
                <li><a href="../#sobre-mi" class="nav-link">SOBRE M√ç</a></li>
                <li><a href="../#habilidades" class="nav-link">HABILIDADES</a></li>
                <li><a href="../proyectos.html" class="nav-link active">PROYECTOS</a></li>
                <li><a href="../#contacto" class="nav-link">CONTACTO</a></li>
            </ul>
        </div>
    </nav>

    <div id="sec-ruta">
        <h3>Ruta</h3>
        <p id="ruta">
            <a href="../proyectos.html">Proyectos</a><span>/</span>
            <a href="../categoria-ia.html">Administraci√≥n de sistemas</a><span>/</span>
            <span>Comparativa LLMs Peque√±os</span>
        </p>
    </div>

    <div id="info-proyect">
        
        <div id="navegador-izq">
            <h3 id="navegador-cabecera">Contenido</h3>
            <hr>
            <a href="#introduccion" id="active"><span>Introducci√≥n</span></a>
            <a href="#graficas"><span>Datos y Gr√°ficas</span></a>
            <a href="#analisis"><span>An√°lisis Detallado</span></a>
            <a href="#metodologia"><span>Metodolog√≠a (Prompts)</span></a>
        </div>

        <div id="informacion-der">

            <div id="introduccion" class="seccion-contenido">
                <div class="header-seccion">
                    <h1>Comparativa de Modelos LLM</h1>
                    <hr>
                </div>
                <p>Este proyecto analiza el rendimiento de cuatro modelos de lenguaje peque√±os (SLM) someti√©ndolos a pruebas de dificultad incremental. El objetivo es determinar la relaci√≥n entre la velocidad de inferencia, la capacidad l√≥gica y la precisi√≥n en tareas estrictas.</p>
                
                <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px;">
                    <div style="flex: 1; background: var(--color-background); padding: 15px; border-radius: 8px; border: 1px solid var(--color-border);">
                        <strong style="color: var(--chart-qwen4b)">Qwen3 4B</strong><br>
                        <span style="font-size: 13px; color: var(--color-text-secondary)">Equilibrado y ligero</span>
                    </div>
                    <div style="flex: 1; background: var(--color-background); padding: 15px; border-radius: 8px; border: 1px solid var(--color-border);">
                        <strong style="color: var(--chart-granite)">Granite 4H Tiny</strong><br>
                        <span style="font-size: 13px; color: var(--color-text-secondary)">Ultra r√°pido, baja l√≥gica</span>
                    </div>
                    <div style="flex: 1; background: var(--color-background); padding: 15px; border-radius: 8px; border: 1px solid var(--color-border);">
                        <strong style="color: var(--chart-gemma)">Gemma 3n</strong><br>
                        <span style="font-size: 13px; color: var(--color-text-secondary)">Conciso pero alucina</span>
                    </div>
                    <div style="flex: 1; background: var(--color-background); padding: 15px; border-radius: 8px; border: 1px solid var(--color-border);">
                        <strong style="color: var(--chart-qwen8b)">Qwen3 8B</strong><br>
                        <span style="font-size: 13px; color: var(--color-text-secondary)">Lento pero inteligente</span>
                    </div>
                </div>
            </div>

            <div id="graficas" class="seccion-contenido">
                <div class="header-seccion">
                    <h1>Visualizaci√≥n de Datos</h1>
                    <hr>
                </div>
                <p>A continuaci√≥n se presentan los resultados cuantitativos extra√≠dos de las pruebas, los valores son las medias.</p>
                <p style="color: var(--color-accent); font-weight: bold; font-size: 15px; background: rgba(74, 158, 255, 0.1); padding: 10px; border-radius: 5px; text-align: center;">üí° Haz click en cualquier barra para resaltar ese modelo en TODAS las gr√°ficas.</p>

                <div class="chart-title">Velocidad de Generaci√≥n (Tokens por Segundo)</div>
                <div class="chart-wrapper">
                    <canvas id="chartSpeed"></canvas>
                </div>
                <p style="font-size: 14px; margin-top: -20px; margin-bottom: 40px;">*M√°s alto es m√°s r√°pido. Granite domina en velocidad bruta.</p>

                <div class="chart-title">Precisi√≥n de Respuestas (% de Acierto)</div>
                <div class="chart-wrapper">
                    <canvas id="chartAccuracy"></canvas>
                </div>
                <p style="font-size: 14px; margin-top: -20px; margin-bottom: 40px;">*Porcentaje de pruebas superadas por nivel. Qwen 8B mantiene la consistencia.</p>

                <div class="chart-title">Latencia: Tiempo hasta el primer token (Segundos)</div>
                <div class="chart-wrapper">
                    <canvas id="chartLatency"></canvas>
                </div>
                <p style="font-size: 14px; margin-top: -20px; margin-bottom: 40px;">*M√°s bajo es m√°s r√°pido. Indica cu√°nto tarda la IA en empezar a "pensar".</p>

                <div class="chart-title">Consumo: Media de Tokens Totales Generados</div>
                <div class="chart-wrapper">
                    <canvas id="chartTokens"></canvas>
                </div>
                <p style="font-size: 14px; margin-top: -20px;">*Indica la "verbosidad" del modelo. Qwen 4B tiende a enrollarse mucho en niveles dif√≠ciles.</p>
            </div>

            <div id="analisis" class="seccion-contenido">
                <div class="header-seccion">
                    <h1>An√°lisis de Resultados</h1>
                    <hr>
                </div>
                
                <p>Lo que m√°s me preocupaba al tener los resultados y empezar a analizar los datos, era si los niveles de dificultad realmente sub√≠an o si, simplemente, se manten√≠an igual. Algunas preguntas que a m√≠ me parec√≠an sencillas estaban clasificadas con un nivel alto de dificultad y, como todav√≠a no hab√≠a mirado los datos, no sab√≠a si para una m√°quina ser√≠an realmente dif√≠ciles o no. Esta duda desapareci√≥ en cuanto revis√© el primer modelo: <strong>Qwen 4B</strong>.</p>

                <p>Tal y como muestran las gr√°ficas, a medida que la dificultad sub√≠a, la IA se volv√≠a m√°s lenta, tardaba m√°s en empezar a responder, generaba m√°s texto (tokens) en general y se equivocaba m√°s.</p>

                <p>Como an√°lisis general antes de ir uno por uno, ninguno de los 4 modelos fue capaz de escribir el poema del oc√©ano sin usar la letra ‚ÄòA‚Äô (una de las pruebas que detallo abajo). Todos fallaron y la incluyeron. Algunos la usaron durante todo el poema y otros solo se les escap√≥ una vez. Tambi√©n aclaro que los modelos est√°n ordenados por tama√±o, del que menos ocupa al que m√°s.</p>

                <p>Visto este dato curioso (que a partir de ahora probar√© con todas las IAs para ver si consiguen hacer el poema), paso al an√°lisis individual:</p>

                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 20px; background: rgba(255,255,255,0.02); padding: 15px; border-radius: 8px;">
                        <strong style="color: var(--chart-qwen4b); font-size: 18px;">Qwen 4B</strong><br>
                        Es el modelo donde m√°s se notan los cambios seg√∫n sube la dificultad, adem√°s de ser el m√°s ligero de los cuatro. Como dec√≠a antes, con mayor dificultad el modelo iba m√°s lento, tardaba m√°s en soltar el primer token y su porcentaje de aciertos bajaba.
                    </li>
                    <li style="margin-bottom: 20px; background: rgba(255,255,255,0.02); padding: 15px; border-radius: 8px;">
                        <strong style="color: var(--chart-granite); font-size: 18px;">Granite 4H Tiny</strong><br>
                        Aunque este modelo es m√°s pesado que el Qwen 4B, se equivoca m√°s. Fue incapaz de contar bien las letras ‚ÄòR‚Äô de "FERROCARRILERO", algo que el Qwen 4B <strong>s√≠</strong> logr√≥. Se nota que este modelo es m√°s r√°pido que el anterior, y quiz√°s por ir tan r√°pido es por lo que cuenta mal las letras. Al subir la dificultad, su velocidad y la cantidad de tokens se mantuvieron m√°s o menos constantes. Es, sin duda, el modelo m√°s r√°pido del an√°lisis sin importar la dificultad, aunque eso le pasa factura en la calidad de las respuestas.
                    </li>
                    <li style="margin-bottom: 20px; background: rgba(255,255,255,0.02); padding: 15px; border-radius: 8px;">
                        <strong style="color: var(--chart-gemma); font-size: 18px;">Gemma 3n c4b</strong><br>
                        Aqu√≠ la velocidad baja dr√°sticamente, siendo menos de la mitad de r√°pido que los anteriores. Sin embargo, usa muchos menos tokens, llegando a responder a veces con menos de la mitad de texto que los otros. Aun as√≠, no pudo contar bien las ‚ÄòR‚Äô ni hacer el poema. Eso s√≠, fue el primero en acertar el acertijo, aunque dijo que era "Monopoly" porque "el acertijo es popular", sin argumentar nada. Da la sensaci√≥n de que busc√≥ la soluci√≥n en su entrenamiento en lugar de usar la l√≥gica.
                    </li>
                    <li style="margin-bottom: 20px; background: rgba(255,255,255,0.02); padding: 15px; border-radius: 8px;">
                        <strong style="color: var(--chart-qwen8b); font-size: 18px;">Qwen 8B</strong><br>
                        El modelo m√°s pesado de la comparativa y tambi√©n el m√°s lento. Su √∫nico fallo fue el poema del oc√©ano. Lo interesante es que resolvi√≥ el acertijo usando la l√≥gica, ya que en lugar de soltar "Monopoly" o decir que es un acertijo conocido, respondi√≥ "un juego de mesa" y argument√≥ el porqu√©.
                    </li>
                </ul>

                <div class="highlight-box">
                    <h3 style="color: var(--color-accent); margin-top: 0;">Conclusi√≥n</h3>
                    <p style="margin-bottom: 0;">Tras analizar los cuatro modelos, queda claro que existe una relaci√≥n directa entre el "peso" del modelo y su capacidad de razonamiento. Mientras que los modelos m√°s ligeros y r√°pidos (como Granite) priorizan la velocidad sacrificando precisi√≥n en tareas de conteo o l√≥gica, el modelo m√°s pesado (Qwen 8B) demostr√≥ ser el m√°s fiable y "pensante", aunque el precio a pagar sea una respuesta mucho m√°s lenta. Al final, depende de lo que busquemos y de si merece la pena la precisi√≥n a cambio de la velocidad. Es el dilema que est√°n enfrentando a d√≠a de hoy los modelos de 1 bit, tal y como hemos hablado ya varias veces en clase y algo que me parece muy interesante debatir.</p>
                </div>
            </div>

            <div id="metodologia" class="seccion-contenido">
                <div class="header-seccion">
                    <h1>Metodolog√≠a y Prompts</h1>
                    <hr>
                </div>
                <p>Para asegurar la imparcialidad, todos los modelos recibieron exactamente los mismos prompts en sesiones limpias (sin memoria previa). Todas las pruebas tienen un objetivo sobre que analizar. Todas las pruebas fueron generadas por Gemini, pero le pedimos que tuvieran esos objetivos en concreto.</p>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 1.1: Extracci√≥n de Datos</strong>
                        <span class="level-badge">Nivel 1: F√°cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Comprobar si el modelo sigue instrucciones b√°sicas y formato JSON.</p>
                        <div class="prompt-code">
                            "Lee el siguiente texto y extrae la lista de frutas mencionadas y sus colores en formato JSON: 'Juan fue al mercado y compr√≥ una manzana roja, dos pl√°tanos amarillos y una sand√≠a que por fuera era verde.' Solo dame el JSON, nada m√°s."
                        </div>
                        <div class="prompt-eval">
                            <span>Evaluar:</span> Si el modelo respeta el formato JSON y si dice los colores correctos.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 1.2: Cambio de Tono</strong>
                        <span class="level-badge">Nivel 1: F√°cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Creatividad y consistencia en el estilo.</p>
                        <div class="prompt-code">
                            "Reescribe la siguiente frase para que suene como un caballero medieval muy educado: 'Oye, p√°same la sal, que la sopa est√° sosa'."
                        </div>
                        <div class="prompt-eval">
                            <span>Evaluar:</span> Debe saber interpretar el personaje y no equivocarse, como por ejemplo, interpretar a un pirata.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 2.1: El Problema de la Tokenizaci√≥n</strong>
                        <span class="level-badge">Nivel 2: Medio</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Ver c√≥mo maneja el modelo la l√≥gica de caracteres vs tokens.</p>
                        <div class="prompt-code">
                            "Cuenta cu√°ntas veces aparece la letra 'r' (erre) en la palabra: FERROCARRILERO. Razona paso a paso antes de dar el n√∫mero final."
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> 5.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 2.2: L√≥gica de "Sentido Com√∫n"</strong>
                        <span class="level-badge">Nivel 2: Medio</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Mide el "pensamiento lento" y la l√≥gica del mundo real.</p>
                        <div class="prompt-code">
                            "Tengo 5 camisas sec√°ndose al sol. Tardan 4 horas en secarse. Si pongo 10 camisas, ¬øcu√°nto tardar√°n en secarse?"
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> 4 horas. (El sol seca todas a la vez). Si dice otro n√∫mero, ha fallado en la l√≥gica.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 3.1: Restricci√≥n Creativa (Lipograma)</strong>
                        <span class="level-badge">Nivel 3: Dif√≠cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Capacidad de auto-correcci√≥n.</p>
                        <div class="prompt-code">
                            "Escribe un p√°rrafo de 3 frases sobre el oc√©ano. Regla estricta: No puedes usar la letra 'A' en ninguna palabra. Si usas la letra 'A', fallas."
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> Cualquier texto coherente sobre el oc√©ano sin usar ni una sola vez la letra 'A'.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 3.2: Razonamiento L√≥gico-Matem√°tico</strong>
                        <span class="level-badge">Nivel 3: Dif√≠cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Frenar la intuici√≥n r√°pida del modelo y forzar el razonamiento.</p>
                        <div class="prompt-code">
                            "Un bate y una pelota cuestan 1,10 d√≥lares en total. El bate cuesta 1,00 d√≥lar m√°s que la pelota. ¬øCu√°nto cuesta la pelota? Responde con una ecuaci√≥n usando LaTeX."
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> 0.05 d√≥lares. La respuesta intuitiva e incorrecta es 0.10.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 4.1: Pensamiento Lateral</strong>
                        <span class="level-badge">Nivel 4: Muy Dif√≠cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Detectar si la IA entiende contextos ocultos.</p>
                        <div class="prompt-code">
                            "Un hombre empuja su coche hasta un hotel y al llegar se da cuenta de que est√° en bancarrota. ¬øPor qu√©?"
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> Est√° jugando al Monopoly o un juego de mesa.
                        </div>
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <strong>Prueba 4.2: La Alucinaci√≥n de Hechos</strong>
                        <span class="level-badge">Nivel 4: Muy Dif√≠cil</span>
                    </div>
                    <div class="prompt-body">
                        <p>Objetivo: Ver si la IA admite no saber algo o se lo inventa convincentemente.</p>
                        <div class="prompt-code">
                            "Dame una breve biograf√≠a del famoso fil√≥sofo del siglo XIX 'Julian Frixler', conocido por su teor√≠a del 'Positivismo acu√°tico'."
                        </div>
                        <div class="prompt-eval">
                            <span>Respuesta Correcta:</span> "No existe tal fil√≥sofo" o similar. Si escribe una biograf√≠a detallada, est√° alucinando.
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. CONFIGURACI√ìN DE NAVEGACI√ìN (SCROLL SPY) ---
            const sections = document.querySelectorAll('.seccion-contenido');
            const navLinks = document.querySelectorAll('#navegador-izq a');

            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };

            const observerCallback = (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => { link.removeAttribute('id'); });
                        const activeId = entry.target.id;
                        const activeLink = document.querySelector(`#navegador-izq a[href="#${activeId}"]`);
                        if (activeLink) activeLink.setAttribute('id', 'active');
                    }
                });
            };

            const observer = new IntersectionObserver(observerCallback, observerOptions);
            sections.forEach(section => observer.observe(section));

            // --- 2. CONFIGURACI√ìN DE GR√ÅFICAS ---
            const labels = ['F√°cil (N1)', 'Medio (N2)', 'Dif√≠cil (N3)', 'Muy Dif√≠cil (N4)'];

            // Colores con transparencia para el estado normal y color s√≥lido para el borde
            const colors = [
                { bg: '#4a9eff', border: '#4a9eff' }, // Qwen 4B
                { bg: '#ff6b6b', border: '#ff6b6b' }, // Granite
                { bg: '#a29bfe', border: '#a29bfe' }, // Gemma
                { bg: '#00b894', border: '#00b894' }  // Qwen 8B
            ];

            // Datos comunes
            const commonDatasets = [
                { label: 'Qwen 4B', backgroundColor: colors[0].bg, borderColor: colors[0].border, borderWidth: 1 },
                { label: 'Granite Tiny', backgroundColor: colors[1].bg, borderColor: colors[1].border, borderWidth: 1 },
                { label: 'Gemma 3n', backgroundColor: colors[2].bg, borderColor: colors[2].border, borderWidth: 1 },
                { label: 'Qwen 8B', backgroundColor: colors[3].bg, borderColor: colors[3].border, borderWidth: 1 }
            ];

            Chart.defaults.color = '#9ca3af';
            Chart.defaults.borderColor = '#2d3e50';
            Chart.defaults.font.family = "'Segoe UI', Roboto, sans-serif";

            // --- L√ìGICA DE INTERACTIVIDAD (CLICK) ---
            let activeDatasetIndex = null;
            let charts = []; // Array para guardar las instancias de las gr√°ficas

            const handleChartClick = (evt, elements, chart) => {
                if (elements.length > 0) {
                    const selectedIndex = elements[0].datasetIndex;

                    // Si hacemos click en el mismo que ya est√° activo, reseteamos (toggle)
                    if (activeDatasetIndex === selectedIndex) {
                        activeDatasetIndex = null;
                    } else {
                        activeDatasetIndex = selectedIndex;
                    }
                } else {
                    // Si hacemos click en el fondo vac√≠o, reseteamos
                    activeDatasetIndex = null;
                }

                // Actualizar todas las gr√°ficas
                charts.forEach(c => {
                    c.data.datasets.forEach((dataset, i) => {
                        if (activeDatasetIndex === null) {
                            // Restaurar colores originales
                            dataset.backgroundColor = colors[i].bg;
                            dataset.borderColor = colors[i].border;
                            // Restaurar opacidad de l√≠nea si es gr√°fica de l√≠neas
                            if(c.config.type === 'line') {
                                dataset.borderColor = colors[i].border; 
                                dataset.borderWidth = 2;
                            }
                        } else if (i === activeDatasetIndex) {
                            // Resaltar seleccionado (color s√≥lido brillante)
                            dataset.backgroundColor = colors[i].bg;
                            dataset.borderColor = '#fff'; // Borde blanco para destacar
                            dataset.borderWidth = 2;
                        } else {
                            // Atenuar no seleccionados (Gris transparente)
                            dataset.backgroundColor = 'rgba(100, 100, 100, 0.1)';
                            dataset.borderColor = 'rgba(100, 100, 100, 0.1)';
                            dataset.borderWidth = 1;
                        }
                    });
                    c.update();
                });
            };

            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                onClick: (evt, elements, chart) => handleChartClick(evt, elements, chart),
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: '#e8eaed', padding: 20, font: { size: 12 } },
                        onClick: (e, legendItem, legend) => {
                            // Sobrescribimos el comportamiento de la leyenda para que use nuestra l√≥gica de resaltado
                            // simulando un click en el dataset index correspondiente
                            const index = legendItem.datasetIndex;
                            if (activeDatasetIndex === index) activeDatasetIndex = null;
                            else activeDatasetIndex = index;
                            
                            // Actualizamos todas manualmente
                            // (Reutilizamos la l√≥gica de arriba simulando el evento)
                            charts.forEach(c => {
                                c.data.datasets.forEach((dataset, i) => {
                                    if (activeDatasetIndex === null) {
                                        dataset.backgroundColor = colors[i].bg;
                                        dataset.borderColor = colors[i].border;
                                    } else if (i === activeDatasetIndex) {
                                        dataset.backgroundColor = colors[i].bg;
                                        dataset.borderColor = '#fff';
                                    } else {
                                        dataset.backgroundColor = 'rgba(100, 100, 100, 0.1)';
                                        dataset.borderColor = 'rgba(100, 100, 100, 0.1)';
                                    }
                                });
                                c.update();
                            });
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 20, 25, 0.95)',
                        titleColor: '#fff',
                        bodyColor: '#e8eaed',
                        borderColor: '#4a9eff',
                        borderWidth: 1,
                        padding: 10
                    }
                },
                scales: {
                    y: { beginAtZero: true, grid: { color: '#2d3e50' } },
                    x: { grid: { display: false } }
                }
            };

            // --- GR√ÅFICA 1: VELOCIDAD ---
            const chartSpeed = new Chart(document.getElementById('chartSpeed'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { ...commonDatasets[0], data: [40.43, 38.72, 37.91, 34.11] },
                        { ...commonDatasets[1], data: [42.60, 42.79, 41.74, 42.82] },
                        { ...commonDatasets[2], data: [19.05, 18.78, 18.89, 19.19] },
                        { ...commonDatasets[3], data: [12.36, 12.12, 12.12, 11.97] }
                    ]
                },
                options: commonOptions
            });
            charts.push(chartSpeed);

            // --- GR√ÅFICA 2: PRECISI√ìN ---
            const chartAccuracy = new Chart(document.getElementById('chartAccuracy'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { ...commonDatasets[0], data: [100, 100, 50, 50], tension: 0.3, fill: false },
                        { ...commonDatasets[1], data: [100, 50, 50, 50], tension: 0.3, fill: false },
                        { ...commonDatasets[2], data: [100, 50, 50, 100], tension: 0.3, fill: false },
                        { ...commonDatasets[3], data: [100, 100, 50, 100], tension: 0.3, fill: false }
                    ]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        y: { max: 110, beginAtZero: true, grid: { color: '#2d3e50' }, ticks: { callback: v => v + '%' } }
                    }
                }
            });
            charts.push(chartAccuracy);

            // --- GR√ÅFICA 3: LATENCIA ---
            const chartLatency = new Chart(document.getElementById('chartLatency'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { ...commonDatasets[0], data: [0.95, 2.27, 3.71, 6.82] },
                        { ...commonDatasets[1], data: [0.39, 0.42, 1.09, 1.74] },
                        { ...commonDatasets[2], data: [1.17, 0.44, 0.47, 0.45] },
                        { ...commonDatasets[3], data: [2.30, 3.36, 5.43, 6.95] }
                    ]
                },
                options: commonOptions
            });
            charts.push(chartLatency);

            // --- GR√ÅFICA 4: TOKENS TOTALES (NUEVA) ---
            const chartTokens = new Chart(document.getElementById('chartTokens'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { ...commonDatasets[0], data: [67, 319, 108, 938] },  // Qwen 4B
                        { ...commonDatasets[1], data: [51, 208, 211, 285] },  // Granite
                        { ...commonDatasets[2], data: [62, 111, 51, 81] },    // Gemma
                        { ...commonDatasets[3], data: [66, 245, 104, 106] }   // Qwen 8B
                    ]
                },
                options: commonOptions
            });
            charts.push(chartTokens);

        });
    </script>
</body>
</html>
